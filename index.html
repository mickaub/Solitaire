<!DOCTYPE html>
<html>
<head>
<title> Solitaire JS
</title>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0" />
</head>
<style>
/*don't start CSS with a number*/   
*{
    background-color: rgb(0, 166, 255);
}

.foundation-container{
    display: grid;
    grid-template-columns: auto auto auto auto;
    gap: 10px;
    padding: 10px;
    margin-left: 650px;        
    width: 600px;
    background-color: teal;
}
.board-container{
    display: grid;
    grid-template-columns: auto auto auto auto auto auto auto;
    gap: 10px;
    padding: 10px;
    height: 1200px;
    margin-top: 200px;
}
.card{
    background-color: white;
    height: 120px;
    width: 100px;
    border: solid 2px black;
    font-size: 120px;   
    padding-bottom: 20px;  
    padding-left: 20px;
    color: black;
}
.small{
    height: 10px;
    margin-top: -20px;
}
.new-card-block{
    display: flex;
}
#pile{
    margin-right: 50px;
    background-color: yellow;
}
#new-card{
    background-color: white;
}
#HF,#DF{
    color: red;
}
.second-row{
    margin-top: -200px;
}
.covered{
    background-color: rgb(255, 245, 100);
    font-size: 0px;
}
.deck-button{
    height: 60px;
    margin: auto 20px;
}
</style>

<body>    
    <!--Four foundation cards, 7 rows of cards and the deck with 1/3 cards
    Hearts, Diamonds, Clubs, Spades-->
    <h1 style="text-align: center;">Solitaire Game</h1>  
    <button id="console-button" onclick="CheckBack()">Check</button>
    <div id="victory"></div>
    <div id="foundation-array"></div>
    <div id="board-array"></div>
    <div id="deck-array"></div>
    <div id="front-div"></div>
    <div id="frontID-div"></div>
    <div id="match"></div>
    <div>
        <button id="move-to-found0" class="deck-button">Board to Found</button>
        <button id="move-to-found1" class="deck-button">Board to Found</button>
        <button id="move-to-found2" class="deck-button">Board to Found</button>
        <button id="move-to-found3" class="deck-button">Board to Found</button>
        <br>
        <button id="move-from-found0" class="deck-button" onclick="FoundToBoard()">Found to Board</button>
        <button id="move-from-found1" class="deck-button" onclick="FoundToBoard()">Found to Board</button>
        <button id="move-from-found2" class="deck-button" onclick="FoundToBoard()">Found to Board</button>
        <button id="move-from-found3" class="deck-button" onclick="FoundToBoard()">Found to Board</button>
        <div class="foundation-container">
            <div class="card" id="HF"></div>
            <div class="card" id="DF"></div>
            <div class="card" id="CF"></div>
            <div class="card" id="SF"></div>
        </div>    
    </div>
    <br>    
    <div class="new-card-block">
        <div class="card" id="pile"></div>
        <div class="card" id="new-card"></div>       
        <button id="swap-deck" onclick="SwapDeck(1)"class="deck-button">Next Card</button>
        <button id="deck-to-board1" onclick="DeckToBoard(0)"class="deck-button">Move to Board</button>
        <button id="deck-to-board2" onclick="DeckToBoard(1)"class="deck-button">Move to Board</button>
        <button id="deck-to-board3" onclick="DeckToBoard(2)"class="deck-button">Move to Board</button>
        <button id="deck-to-board4" onclick="DeckToBoard(3)"class="deck-button">Move to Board</button>
        <button id="deck-to-board5" onclick="DeckToBoard(4)"class="deck-button">Move to Board</button>
        <button id="deck-to-board6" onclick="DeckToBoard(5)"class="deck-button">Move to Board</button>
        <button id="deck-to-board7" onclick="DeckToBoard(6)"class="deck-button">Move to Board</button>
        <button id="deck-to-found" onclick="UpToFound()"class="deck-button">Move to Foundation</button>
    </div>
    <br>       
    <button id="move-from-col0" onclick="MoveFromBoard(0)">Move From Column</button>
    <button id="move-from-col1" onclick="MoveFromBoard(1)">Move From Column</button>
    <button id="move-from-col2"
    onclick="MoveFromBoard(2)">Move From Column</button>
    <button id="move-from-col3"
    onclick="MoveFromBoard(3)">Move From Column</button>
    <button id="move-from-col4"
    onclick="MoveFromBoard(4)">Move From Column</button>
    <button id="move-from-col5" onclick="MoveFromBoard(5)">Move From Column</button>
    <button id="move-from-col6" onclick="MoveFromBoard(6)">Move From Column</button>
    <br>
    <button id="move-to-col0" onclick="MoveToBoard(0)">Move To Column</button>
    <button id="move-to-col1" onclick="MoveToBoard(1)">Move To Column</button>
    <button id="move-to-col2" onclick="MoveToBoard(2)">Move To Column</button>
    <button id="move-to-col3" onclick="MoveToBoard(3)">Move To Column</button>
    <button id="move-to-col4" onclick="MoveToBoard(4)">Move To Column</button>
    <button id="move-to-col5" onclick="MoveToBoard(5)">Move To Column</button>
    <button id="move-to-col6" onclick="MoveToBoard(6)">Move To Column</button>
    <button id="reload" onclick="Reset()" class="deck-button">Reset</button>
    <br>
    <div class="board-container" id="board-container">        
    </div>        
</body>

<script>
    /*
    foundation arrays change
    column arrays change
    deck array can go to 0
    */
function Card (value, sym, col, text, id){
    this.value = value;
    this.sym = sym;
    this.col = col;
    this.text = text;
    this.id = id;
}

//Can't start variables with a number either
let pre = "&#x1F0";
const c1h = new Card("1","H","R","&#x1F0B1","0");
const c2h = new Card("2","H","R",pre+"B2","1");
const c3h = new Card("3","H","R",pre+"B3","2");
const c4h = new Card("4","H","R",pre+"B4","3");
const c5h = new Card("5","H","R",pre+"B5","4");
const c6h = new Card("6","H","R",pre+"B6","5");
const c7h = new Card("7","H","R",pre+"B7","6");
const c8h = new Card("8","H","R",pre+"B8","7");
const c9h = new Card("9","H","R",pre+"B9","8");
const c10h = new Card("10","H","R",pre+"BA","9");
const cJh = new Card("J","H","R",pre+"BB","10");
const cQh = new Card("Q","H","R",pre+"BD","11");
const cKh = new Card("K","H","R",pre+"BE","12");

const c1d = new Card("1","D","R",pre+"C1","13");
const c2d = new Card("2","D","R",pre+"C2","14");
const c3d = new Card("3","D","R",pre+"C3","15");
const c4d = new Card("4","D","R",pre+"C4","16");
const c5d = new Card("5","D","R",pre+"C5","17");
const c6d = new Card("6","D","R",pre+"C6","18");
const c7d = new Card("7","D","R",pre+"C7","19");
const c8d = new Card("8","D","R",pre+"C8","20");
const c9d = new Card("9","D","R",pre+"C9","21");
const c10d = new Card("10","D","R",pre+"CA","22");
const cJd = new Card("J","D","R",pre+"CB","23");
const cQd = new Card("Q","D","R",pre+"CD","24");
const cKd = new Card("K","D","R",pre+"CE","25");

const c1c = new Card("1","C","B",pre+"D1","26");
const c2c = new Card("2","C","B",pre+"D2","27");
const c3c = new Card("3","C","B",pre+"D3","28");
const c4c = new Card("4","C","B",pre+"D4","29");
const c5c = new Card("5","C","B",pre+"D5","30");
const c6c = new Card("6","C","B",pre+"D6","31");
const c7c = new Card("7","C","B",pre+"D7","32");
const c8c = new Card("8","C","B",pre+"D8","33");
const c9c = new Card("9","C","B",pre+"D9","34");
const c10c = new Card("10","C","B",pre+"DA","35");
const cJc = new Card("J","C","B",pre+"DB","36");
const cQc = new Card("Q","C","B",pre+"DD","37");
const cKc = new Card("K","C","B",pre+"DE","38");

const c1s = new Card("1","S","B",pre+"A1","39");
const c2s = new Card("2","S","B",pre+"A2","40");
const c3s = new Card("3","S","B",pre+"A3","41");
const c4s = new Card("4","S","B",pre+"A4","42");
const c5s = new Card("5","S","B",pre+"A5","43");
const c6s = new Card("6","S","B",pre+"A6","44");
const c7s = new Card("7","S","B",pre+"A7","45");
const c8s = new Card("8","S","B",pre+"A8","46");
const c9s = new Card("9","S","B",pre+"A9","47");
const c10s = new Card("10","S","B",pre+"AA","48");
const cJs = new Card("J","S","B",pre+"AB","49");
const cQs = new Card("Q","S","B",pre+"AD","50");
const cKs = new Card("K","S","B",pre+"AE","51");   

let cardArray1 = [c1h,c2h,c3h,c4h,c5h,c6h,c7h,c8h,c9h,c10h,cJh,cQh,cKh];
let cardArray2 = [c1d,c2d,c3d,c4d,c5d,c6d,c7d,c8d,c9d,c10d,cJd,cQd,cKd];
let cardArray3 = [c1c,c2c,c3c,c4c,c5c,c6c,c7c,c8c,c9c,c10c,cJc,cQc,cKc];
let cardArray4 = [c1s,c2s,c3s,c4s,c5s,c6s,c7s,c8s,c9s,c10s,cJs,cQs,cKs];

let cardArrayA = cardArray1.concat(cardArray2,cardArray3,cardArray4);
//console.log(cardArrayA[14].value);

/*
BoardToBoard
frontBack would be easiest to implement
frontback can only be reduced by board to board or board to foundation
frontback can be -1 if column is empty
frontback can be increased by found to board or deck to board or board to board
*/

//step 1 init
let foundationArr = [0,13,26,39]; //99 is king on top
let permArrayID = [];
let starters = [0,1,2,3,4,5,6,8,9,10,11,12,13,16,17,18,19,20,24,25,26,27,32,33,34,40,41,48];
let hidden = [7,14,21,28,35,42,49,15,22,29,36,43,50,23,30,37,44,51,31,38,45,39,46,47,49,50,51];
let shuffledArray = cardArrayA.slice();
let frontPos = [0,8,16,24,32,40,48];
let deck = [];
let frontID = []; //for matchID -2 is for 2s and As and -1 is for Empty
let frontBackPos = [0,8,16,24,32,40,48];
let notFrontIDArr = [-1,-1,-1,-1,-1,-1,-1];
let notFrontPosArr = [-1,-1,-1,-1,-1,-1,-1];
let matches = [-1,-1,-1,-1,-1,-1,-1];
let boardContainer = document.getElementById("board-container");
let matchesCombined = matches.concat(foundationArr);
let matchesArray = [];
let movingToColArray = [];//needs fixing

function Shuffle (array) {    
    let currentIndex = array.length;
    let temporaryValue, randomIndex;

    while (0 !== currentIndex) {            
        randomIndex = Math.floor(Math.random() * currentIndex);
        currentIndex -= 1;            
        temporaryValue = array[currentIndex];
        array[currentIndex] = array[randomIndex];
        array[randomIndex] = temporaryValue;
    }        
}

let testArr = [];//temp
//console.log(testArr.length, testArr[2].length)//temp

function FrontMatch(){    
   // let acematch = [];
    for(let i=0;i<7;i++){ //calculates cards that go on top     
        let a = [];
        let b = Number(frontID[i]);
        let c = b%13;
        

        if(b==-1){
            a = [12,25,38,51];
        }
        if(b>0&&b<13){
            let d = b+25;
            let e = b+38;
            a = [d,e];
        }
        if(b>12 && b<26){
            let d = b+12;
            let e = b+25;
            a = [d,e];
        }
        if(b>25 && b<39){
            let d = b-27;
            let e = b-14;
            a = [d,e];
        }
        if(b>38){
            let d = b-27;
            let e = b-40;
            a = [d,e];
        }
        if(c==0||c==1){
            a = [-2];
        }
        matchesCombined[i] = a;   

        if(foundationArr.indexOf(b)!==-1){
            let aceMatch = foundationArr.indexOf(b);
            document.getElementById(`move-to-found${aceMatch}`).style.color = "yellow"; 
            document.getElementById(`move-from-col${i}`).style.color = "yellow"; 
        }
    }
    
   /* for(let i=0;i<4;i++){
        if(frontID.indexOf(foundationArr[i])!==-1){
           // let arrMatch = frontID.indexOf(foundationArr[i]);
            document.getElementById(`move-to-found${i}`).style.color = "yellow"; 
            //acematch.push(i);
        }
    }*/
   // console.log(acematch,frontID);
    for(let i=7;i<11;i++){
        let a = i-7;
        matchesCombined[i] = foundationArr[a];        
    }
    matchesArray = [];
    for(let i=0;i<matchesCombined.length;i++){
        if(matchesCombined[i].length>1){
            for(let j=0;j<matchesCombined[i].length;j++){
                matchesArray.push(matchesCombined[i][j]);
            }
        }
        else{
            let a = Number(matchesCombined[i])
            matchesArray.push(a);
        }
    }
    
   // console.log(testArr);
  //  console.log(middleBackIDArr);
   // console.log(middleBackPosArr);
    document.getElementById("match").innerHTML = matchesArray; //temp
}
//step 2 init
Shuffle(shuffledArray);

for(let i=0;i<140;i++){
    let newCard = document.createElement('div');
    newCard.classList.add('card');   
    //adding to top row causes float
    newCard.classList.add('second-row');
      
    newCard.id = i;
    boardContainer.append(newCard);
    if(i<52){
        if(hidden.indexOf(i)!==-1){
            document.getElementById(`${i}`).style.visibility = "hidden";
            permArrayID.push(-1);
            let a = shuffledArray[i].id;
            deck.push(a); //28 cards on board, 24 cards in deck
        }
        if(starters.indexOf(i)!==-1){
            permArrayID[i] = shuffledArray[i].id;
            document.getElementById(`${i}`).innerHTML = shuffledArray[i].text;
            if(shuffledArray[i].col == "R"){
                document.getElementById(`${i}`).style.color = "red";
            }
            else{
                document.getElementById(`${i}`).style.color = "black";
            }
            if(frontPos.indexOf(i)==-1){
                document.getElementById(`${i}`).classList.add("covered");
            }
            else{
                frontID.push(shuffledArray[i].id);
            }
        }
    }  
    else{
        permArrayID.push(-1);
        document.getElementById(`${i}`).style.visibility = "hidden"; 
        //document.getElementById(`${i}`).classList.add("small");//temp
    }  
}
//frontID[0]=-1;//temp
//foundationArr[0] = 1;//temp

let deckTop = deck[0];  

document.getElementById("new-card").innerHTML = cardArrayA[deckTop].text;

if(cardArrayA[deckTop].col == "R"){
    document.getElementById("new-card").style.color = "red";
}
else{
    document.getElementById("new-card").style.color = "black";
}

//document.getElementById("board-container").style.height = "600px";//temp
FrontMatch();

for(let i=0;i<4;i++){
    if(foundationArr[i]==deck[0]){
        document.getElementById("deck-to-found").style.color = "yellow"; 
        //document.getElementById("move-to-found").style.color = "yellow"; 
    }
}

//console.log(matchesArray);
//console.log(foundationArr);
//matchesCombined = matches.concat(foundationArr);

document.getElementById("foundation-array").innerHTML = foundationArr; //temp
document.getElementById("board-array").innerHTML = permArrayID; //temp
document.getElementById("deck-array").innerHTML = deck; //temp
document.getElementById("front-div").innerHTML = frontPos; //temp
document.getElementById("frontID-div").innerHTML = frontID; //temp
document.getElementById("match").innerHTML = matchesArray; //temp

//Deck
function SwapDeck(swap){
    if(deck.length==0||deck.length==1){
        return;
    }
    if(swap==1){
        deck.push(deck[0]);
    }    
    deck.shift();
    if(deck.length==1){        
        document.getElementById("pile").style.visibility = "hidden";
        document.getElementById("swap-deck").style.visibility = "hidden";        
    }    
    if(deck.length==0){
        document.getElementById("deck-to-board").style.visibility = "hidden";
        document.getElementById("deck-to-found").style.visibility = "hidden";
        document.getElementById("new-card").style.visibility = "hidden";
        return;
    }    
    let a = deck[0];  
    document.getElementById("new-card").innerHTML = cardArrayA[a].text;
    //matchID[0] = a;    //temp
    if(cardArrayA[a].col == "R"){
        document.getElementById("new-card").style.color = "red";
    }
    else{
        document.getElementById("new-card").style.color = "black";
    }

    document.getElementById("deck-to-found").style.color = "black"; 
/*
    for(let i=0;i<7;i++){
        let f = front[i];
        let b = permArrayID[f];
        let d = deck[0];
        let ip = i + 1;
        matchID[ip] = b;
        document.getElementById(`deck-to-board${ip}`).style.color = "black";
        //if d = 13,26,29,42 && front=-1
        if(d<13){
            if(b==(d+27)||b==(d+40)){
                document.getElementById(`deck-to-board${ip}`).style.color = "yellow";             
            }
        }
        if(d>12&&d<26){//13over27and40
            if(b==(d+14)||b==(d+27)){    
                document.getElementById(`deck-to-board${ip}`).style.color = "yellow";              
            }
        }
        if(d>25&&d<39){//26over1and14
            if(b==(d-25)||b==(d-12)){       
                document.getElementById(`deck-to-board${ip}`).style.color = "yellow";          
            }
        }
        if(d>38){//39over1and14
            if(b==(d-38)||b==(d-25)){
                document.getElementById(`deck-to-board${ip}`).style.color = "yellow";         
            }
        }        
    }
*/
    for(let i=0;i<4;i++){
        if(foundationArr[i]==deck[0]){
            document.getElementById("deck-to-found").style.color = "yellow"; 
            //document.getElementById("move-to-found").style.color = "yellow"; 
        }
    }
   // document.getElementById("match").innerHTML = matchID;
    document.getElementById("deck-array").innerHTML = deck;//temp
  //  console.log(cardArrayA[a].id);
}
//deck[0]=0;//temp
function UpToFound(){    
    if(deck.length==0){
        return;
    }
    
    let a = Number(deck[0]);
    let b = cardArrayA[a].text;
    
    if(foundationArr.indexOf(a)==-1){
        return;
    }
    //console.log("foundWorking",deck[0]);
    document.getElementById("deck-to-found").style.color = "black"; 
   // document.getElementById("move-to-found").style.color = "black";

    if(a==foundationArr[0]){
        document.getElementById("HF").innerHTML = b;        
        
        if(foundationArr[0]==12){
            foundationArr[0] = 99;
        }
        else{
            foundationArr[0] += 1;
        }        
    }
    if(a==foundationArr[1]){
        document.getElementById("DF").innerHTML = b;
        if(foundationArr[1]==25){
            foundationArr[1] = 99;
        }
        else{
            foundationArr[1] += 1;
        }        
    }
    if(a==foundationArr[2]){
        document.getElementById("CF").innerHTML = b;
        if(foundationArr[2]==38){
            foundationArr[2] = 99;
        }
        else{
            foundationArr[2] += 1;
        }        
    }
    if(a==foundationArr[3]){
        document.getElementById("SF").innerHTML = b;
        if(foundationArr[3]==51){
            foundationArr[3] = 99;
        }
        else{
            foundationArr[3] += 1;
        }        
    }
    
    if(foundationArr[0]==99&&foundationArr[1]==99&&foundationArr[2]==99&&foundationArr[3]==99){       
        Victory();
        return;
    }   

    SwapDeck(0);
    
    for(let i=7;i<11;i++){
        let a = i-7;
        matchesCombined[i] = foundationArr[a];        
    }
    matchesArray = [];
    for(let i=0;i<matchesCombined.length;i++){
        if(matchesCombined[i].length>1){
            for(let j=0;j<matchesCombined[i].length;j++){
                matchesArray.push(matchesCombined[i][j]);
            }
        }
        else{
            let a = Number(matchesCombined[i])
            matchesArray.push(a);
        }
    }

    document.getElementById("match").innerHTML = matchesArray; //temp
    document.getElementById("foundation-array").innerHTML = foundationArr; //temp
}

function DeckToBoard(tarCol){
    
    let a = deck[0];
    let moving = cardArrayA[a];
    let target = -1;
    if(frontPos[tarCol]!==-1){
        target = frontPos[tarCol] + 7;
    }
    else{
        target = tarCol;
        frontBackPos[tarCol] = tarCol;
    }
    
    let targetText = moving.text;
    let potMatch = matchesCombined[tarCol];
    let MatchProceed = false;

    for(let i=0;i<potMatch.length;i++){
        if(potMatch[i]==a){
            MatchProceed = true;
        }
    }

    if(MatchProceed == false){
        return;
    }

    //console.log(target, potMatch);

    document.getElementById(target).innerHTML = targetText;
    document.getElementById(target).style.visibility = "visible";

    if(moving.col == "R"){
        document.getElementById(target).style.color = "red";
    }
    else{
        document.getElementById(target).style.color = "black";
    }

    permArrayID[target] = a;
    frontPos[tarCol] = target;
    frontID[tarCol] = a;

    SwapDeck(0);
    FrontMatch();
    
    document.getElementById("deck-array").innerHTML = deck;//temp
    document.getElementById("board-array").innerHTML = permArrayID;//temp
    document.getElementById("front-div").innerHTML = frontPos;//temp
    document.getElementById("frontID-div").innerHTML = frontID;//temp
    document.getElementById("match").innerHTML = matchesArray; //temp
    /*
    document.getElementById("deck-to-board2").style.color = "black";
    document.getElementById("deck-to-board3").style.color = "black";
    document.getElementById("deck-to-board4").style.color = "black";
    document.getElementById("deck-to-board5").style.color = "black";
    document.getElementById("deck-to-board6").style.color = "black";
    document.getElementById("deck-to-board7").style.color = "black";
    */
    
}
//foundation
function BoardToFound(BoardMatch,MatchPosition,MovingCol){ //needs fixing   
    
    let moving = cardArrayA[BoardMatch];
    let targetID = Number(moving.id);//make sure to turn all properties into number from string
    let targetText = moving.text;

    console.log(targetID,foundationArr);
    if(foundationArr.indexOf(targetID)==-1){
        return;
    }
    else{
        console.log("match");
    }

    if(targetID == foundationArr[0]){
        document.getElementById("HF").innerHTML = targetText;
        if(foundationArr[0]==12){
            foundationArr[0] = 99;
        }
        else{
            foundationArr[0] += 1;
        }   
    }
    if(targetID == foundationArr[1]){
        document.getElementById("DF").innerHTML = targetText;
        if(foundationArr[1]==25){
            foundationArr[1] = 99;
        }
        else{
            foundationArr[1] += 1;
        }        
    }
    if(targetID==foundationArr[2]){
        document.getElementById("CF").innerHTML = targetText;
        if(foundationArr[2]==38){
            foundationArr[2] = 99;
        }
        else{
            foundationArr[2] += 1;
        }        
    }
    if(targetID==foundationArr[3]){
        document.getElementById("SF").innerHTML = targetText;
        if(foundationArr[3]==51){
            foundationArr[3] = 99;
        }
        else{
            foundationArr[3] += 1;
        }        
    }

    document.getElementById(`${MatchPosition}`).innerHTML = "";
    document.getElementById(`${MatchPosition}`).style.visibility = "hidden";

    let changingCard = frontID[MovingCol];  
    let newCardPos = -1;
    if(MatchPosition>6){
        newCardPos = MatchPosition - 7;
    }
   
    
    //let newCardID = Number(CardArrayA[newCardPos].id);


    if(newCardPos!==-1){
        frontID[MovingCol] = permArrayID[newCardPos];
        document.getElementById(`${newCardPos}`).classList.remove("covered");
    }
    else{
        frontID[MovingCol] = -1;
    }
    if(frontPos[MovingCol]>6){
        frontPos[MovingCol] -=  7;
        if(frontPos[MovingCol]<frontBackPos[MovingCol]){
            frontBackPos[MovingCol] = frontPos[MovingCol];
        }
    }
    else{
        frontPos[MovingCol] = -1;
        frontBackPos[MovingCol] = -1;
    }
    
    permArrayID[MatchPosition] = -1;

    if(foundationArr[0]==99 && foundationArr[1]==99 && foundationArr[2]==99 && foundationArr[3]==99){
        Victory();
        return;
    } 

    document.getElementById("move-to-found0").style.color = "black";
    document.getElementById("move-to-found1").style.color = "black";
    document.getElementById("move-to-found2").style.color = "black";
    document.getElementById("move-to-found3").style.color = "black";

    FrontMatch();

    document.getElementById("board-array").innerHTML = permArrayID;//temp
    document.getElementById("front-div").innerHTML = frontPos;//temp
    document.getElementById("frontID-div").innerHTML = frontID;//temp
    //document.getElementById("match").innerHTML = matchesArray; //temp
    document.getElementById("foundation-array").innerHTML = foundationArr; //temp
   
}
/*foundationArr = [10,20,30,40];//temp
document.getElementById("HF").innerHTML = cardArrayA[10].text;//temp
document.getElementById("DF").innerHTML = cardArrayA[20].text;//temp
document.getElementById("CF").innerHTML = cardArrayA[30].text;//temp
document.getElementById("SF").innerHTML = cardArrayA[40].text;//temp

//document.getElementById("match").innerHTML = matchesArray; //temp
document.getElementById("foundation-array").innerHTML = foundationArr; //temp*/

FrontMatch();//temp
console.log(matchesCombined);

function FoundToBoard(){ //needs fixing
    
    for(let i=0;i<4;i++){
        let foundChoice = foundationArr[i];
        for(let j=0;j<7.;j++){
            if(matchesCombined[j].length>1){
                for(let k=0;k<matchesCombined[j].length;k++){
                    if(matchesCombined[j][k]==foundChoice){                       
                        movingToColArray.push(j);
                    };
                }
            }            
        }
    }
    
    console.log(movingToColArray);
    
    /*
    let a = deck[0];
    let moving = cardArrayA[a];
    let target = frontPos[tarCol] + 7;
    let targetText = moving.text;
    let potMatch = matchesCombined[tarCol];
    let MatchProceed = false;

    for(let i=0;i<potMatch.length;i++){
        if(potMatch[i]==a){
            MatchProceed = true;
        }
    }

    if(MatchProceed == false){
        return;
    }

    console.log(target, potMatch);

    document.getElementById(target).innerHTML = targetText;
    document.getElementById(target).style.visibility = "visible";

    if(moving.col == "R"){
        document.getElementById(target).style.color = "red";
    }
    else{
        document.getElementById(target).style.color = "black";
    }

    permArrayID[target] = a;
    frontPos[tarCol] = target;
    frontID[tarCol] = a;

    SwapDeck(0);
    FrontMatch(); */
    
    
    document.getElementById("board-array").innerHTML = permArrayID;//temp
    document.getElementById("front-div").innerHTML = frontPos;//temp
    document.getElementById("frontID-div").innerHTML = frontID;//temp
    document.getElementById("match").innerHTML = matchesArray; //temp
}


//board

function MoveFromBoard(MovingCol){
    let a = frontID[MovingCol];

    if(a==-1){
        return;
    }
    let b = frontPos[MovingCol];
    let moving = cardArrayA[a];
    let targetText = moving.text;

   
    let potMovers = [];
    //let potDest = [];

    for(let i=0;i<7;i++){
        if(matchesCombined[i].length>1){
            for(let j=0;j<matchesCombined[i].length;j++){
                if(matchesCombined[i][j]==a){
                    potMovers.push(i);
                }                
            }
        }
    }
    if(potMovers.length>0){
        console.log(potMovers);
        let m = potMovers[0];//temp     
        let mNewPos = -1;
        if(frontPos[m]!==-1){
            mNewPos = frontPos[m] + 7;   
        }
        else{
            mNewPos = m;
            frontBackPos[m] = m;
        }
     
        document.getElementById(`${b}`).innerHTML = "";
        document.getElementById(`${b}`).style.visibility = "hidden";

        let newCardPos = -1;
        if(b>6){
            newCardPos = b - 7;
        }
        
        if(newCardPos!==-1){
            frontID[MovingCol] = permArrayID[newCardPos];
            document.getElementById(`${newCardPos}`).classList.remove("covered");
        }
        else{
            frontID[MovingCol] = -1;
        }

        if(frontPos[MovingCol]>6){
            frontPos[MovingCol] -=  7;
            if(frontPos[MovingCol]<frontBackPos[MovingCol]){
                frontBackPos[MovingCol] = frontPos[MovingCol];
            }
        }
        else{
            frontPos[MovingCol] = -1;
            frontBackPos[MovingCol] = -1;
        }

        permArrayID[b] = -1;

        document.getElementById(`${mNewPos}`).innerHTML = moving.text;

    
        if(moving.col == "R"){
            document.getElementById(`${mNewPos}`).style.color = "red";
        }
        else{
            document.getElementById(`${mNewPos}`).style.color = "black";
        }

        document.getElementById(`${mNewPos}`).style.visibility = "visible";    

        permArrayID[mNewPos] = moving.id;
        frontPos[m] = mNewPos;
        frontID[m] = moving.id;

    
    }

    FrontMatch();

    document.getElementById("board-array").innerHTML = permArrayID;//temp
    document.getElementById("front-div").innerHTML = frontPos;//temp
    document.getElementById("frontID-div").innerHTML = frontID;//temp
    document.getElementById("match").innerHTML = matchesArray; //temp
    if(potMovers.length==0){
        BoardToFound(a,b,MovingCol);
    }
    potMovers = [];
    
}

function MoveToBoard(MovingCol){
    if(movingToColArray.indexOf(MovingCol)==-1){
        return;
    }
    let matches = matchesCombined[MovingCol];
    let foundationMatchesArr = [];    
    let foundationChanging = [];//temp

    for(let i=0;i<4;i++){
        if(matches.indexOf(foundationArr[i])!==-1){
            foundationMatchesArr.push(foundationArr[i]);      
            foundationChanging.push(i); 
        }
    }
    let moving = foundationMatchesArr[0];//temp
    let movingCard = cardArrayA[moving];//temp
    let target = frontPos[MovingCol] + 7;
    let targetText = movingCard.text;
    let firstChange = foundationChanging[0];

    foundationArr[firstChange] -= 1;
    let newArrayID = foundationArr[firstChange];
    let newArrayCard = cardArrayA[newArrayID];
    if(firstChange==0){
        document.getElementById("HF").innerHTML = newArrayCard.text;
    }
    if(firstChange==1){
        document.getElementById("DF").innerHTML = newArrayCard.text;
    }
    if(firstChange==2){
        document.getElementById("CF").innerHTML = newArrayCard.text;
    }
    if(firstChange==3){
        document.getElementById("SF").innerHTML = newArrayCard.text;
    }
    //console.log(moving);
   // let potMatch = matchesCombined[tarCol];
    //let MatchProceed = false;

    document.getElementById(target).innerHTML = targetText;

    if(movingCard.col == "R"){
        document.getElementById(target).style.color = "red";
    }
    else{
        document.getElementById(target).style.color = "black";
    }

    document.getElementById(target).style.visibility = "visible";    

    permArrayID[target] = moving;
    frontPos[MovingCol] = target;
    if(frontBackPos[MovingCol]==-1){
        frontBackPos[MovingCol] = MovingCol;
    }
    frontID[MovingCol] = moving;

    FrontMatch();

    movingToColArray.shift();
    console.log(movingToColArray);

    document.getElementById("board-array").innerHTML = permArrayID;//temp
    document.getElementById("front-div").innerHTML = frontPos;//temp
    document.getElementById("frontID-div").innerHTML = frontID;//temp
    document.getElementById("match").innerHTML = matchesArray; //temp
    document.getElementById("foundation-array").innerHTML = foundationArr; //temp

}
//victory and reload
function Victory(){ //when king added to foundations, array is turned to 99
    document.getElementById("victory").innerHTML = "VICTORY!";
    document.getElementById("victory").style.fontSize = "50px";
}

function Reset(){
    location.reload();
}

function CheckBack(){
    console.log(frontBackPos);
    let diffArr = [-1,-1,-1,-1,-1,-1,-1];//temp
    for(let i=0;i<7;i++){
        if(frontPos[i]>6){
            let a = frontPos[i] - frontBackPos[i];
            let b = a/7; 
            let change = frontPos[i] - 7;
            if (b>0){
                let tempArr = [];
                for(let i=0;i<b;i++){
                    let c = permArrayID[change];
                    let d = Number(cardArrayA[c].id);
                    tempArr.push(d);
                    change -= 7;
                }
                diffArr[i] = tempArr;
            }               
         }
    }
        
    console.log(diffArr);
}

/*

let moveReady = [false,false,false,false,false,false,false,false,false,false,false];
let finalFront = [-1,-1,-1,-1,-1,-1,-1]

let foundationCodes = [];
let deckID = [];

let frontOfFront = [7,15,23,31,39,47,55];//temp

let foundHLength = 0;
let foundDLength = 0;
let foundCLength = 0;
let foundSLength = 0;

let matchID = [0];

let foundationReady = [0,13,26,39];

//let foundationArr = [];

let moveSuccess = "NO"; //temp

/*let frontDeckID = deck[0];
let frontDeckCard = cardArrayA[frontDeckID];
document.getElementById("new-card").innerHTML = frontDeckCard.text;

if(frontDeckCard.col == "R"){
    document.getElementById("new-card").style.color = "red";
}
else{
    document.getElementById("new-card").style.color = "black";
}*/

//console.log(permArrayID.length);

/*
matchID[0] = deck[0];
for(let i=0;i<7;i++){
    let a = frontPos[i];
    let b = permArrayID[a];
    let d = deck[0];
    let ip = i + 1;
    if(d<13){
        if(b==(d+27)||b==(d+40)){
           
            document.getElementById(`deck-to-board${ip}`).style.color = "yellow";  
        }
    }
    if(d>12&&d<26){//13over27and40
        if(b==(d+14)||b==(d+27)){
                
            document.getElementById(`deck-to-board${ip}`).style.color = "yellow";            
        }
    }
    if(d>25&&d<39){//26over1and14
        if(b==(d-25)||b==(d-12)){
              
            document.getElementById(`deck-to-board${ip}`).style.color = "yellow";     
        }
    }
    if(d>38){//39over1and14
        if(b==(d-38)||b==(d-25)){
           
            document.getElementById(`deck-to-board${ip}`).style.color = "yellow";         
        }
    }
    matchID.push(b);
}

for(let i=0;i<4;i++){
    if(foundationReady[i]==deck[0]){
        document.getElementById("deck-to-found").style.color = "yellow"; 
    }
}

//document.getElementById("match").innerHTML = matchID;

/*let testVar = deck[0];
let board = 1;
let found = 2;*/
//front[0] = -1;//test
//document.getElementById("0").innerHTML = "";//temp
//document.getElementById("0").style.visibility = "hidden";//test

function MatchTest(input,type){ //possibly replace with matchlist or modify
    let testText = "";
    if(type==1){
    for(let i=0;i<7;i++){
        let f = frontPos[i];        
        let d = input;
        let ip = i + 1;
        
        document.getElementById(`deck-to-board${ip}`).style.color = "black";
        if (d==12|| d==25||d==38||d==51){
            if(f==-1){
                document.getElementById(`deck-to-board${ip}`).style.color = "yellow";  
                let e = "king ";
                let c = i.toString();
                testText += e;
                testText += c;
                return testText;
            }
            else{
                testText += "No place for king";
                return testText;
            }
        }
        let b = permArrayID[f];
        matchID[ip] = b;
        if(d<13){
            if(b==(d+27)||b==(d+40)){
                document.getElementById(`deck-to-board${ip}`).style.color = "yellow";    
                let c = i.toString();
                testText += c;         
            }
        }
        if(d>12&&d<26){//13over27and40
            if(b==(d+14)||b==(d+27)){    
                document.getElementById(`deck-to-board${ip}`).style.color = "yellow";       
                let c = i.toString();
                testText += c;             
            }
        }
        if(d>25&&d<39){//26over1and14
            if(b==(d-25)||b==(d-12)){       
                document.getElementById(`deck-to-board${ip}`).style.color = "yellow";       
                let c = i.toString();
                testText += c;         
            }
        }
        if(d>38){//39over1and14
            if(b==(d-38)||b==(d-25)){
                document.getElementById(`deck-to-board${ip}`).style.color = "yellow";       
                let c = i.toString();
                testText += c;        
                }
            }        
        }
        return testText;
    }
    if(type==2){
        for(let i=0;i<4;i++){
        if(foundationReady[i]==deck[0]){
            let p = i+7;
            document.getElementById("deck-to-found").style.color = "yellow"; 
            moveReady[p] = true;
            let c = i.toString();
            testText += c;
            testText += "found";
            return testText;
        }
    }
    return testText;
    }
}
//let testTwo = MatchTest(testVar,board);
//let testFound = MatchTest(testVar,found);
//console.log(testTwo,testFound);
</script>
</html>